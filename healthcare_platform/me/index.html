<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicacion Médico Especialista</title>
    <link rel="stylesheet" href="estilo.css"></link>
    <style>
        .vista { 
            display: none; 
        }
        .vista.visible { 
            display: block; 
        }
        .solo-lectura {
            background-color: #8fd3fe;
        }

    </style>
</head>
<body>
    <h1>Aplicación MEP</h1>
        <div class="vista" id="acceso">
            <form id="entrar">
                <p>Introduzca sus claves de acceso</p>
                <label for="usuario">Usuario: </label><input type="text" id="usuario" name="usuario"><br>
                <label for="password">Contraseña: </label><input type="password" id="contrasena" name="contrasena"><br><br>
                <input type="button" value="Entrar" onclick="entrar()">
                <input type="button" value="Registrarse" onclick="registrarse()">
                
            </form>
            
        </div>
    </div>
    <div class="vista" id="datosMedico">
        <h2>Datos del médico</h2>
        <form>
        <label for="nombre">Nombre: <input type="text" id="nombreMedico" name="nombre"></label><br>
        <label for="apellidos">Apellidos: <input type="text" id="apellidosMedico" name="apellidosMedico"></label><br>
        <label for="login">Login: <input type="text" id="login" name="login"></label><br>
        <label for="contrasenaMed">Contraseña: <input type="password" id="contrasenaMed" name="contrasenaMed"></label><br>
        <label for="centros">Centro: <select id="centros" name="centros"></select></label><br><!-- SE TIENEN QUE MOSTRAR LA LISTA DE HOSPITALES-->
        <label for="especialidades">Especialidades: <select id="especialidad" name="especialidad"></select></label><br>
        <input type="button" value="Guardar" onclick="guardarMedicoEspecialista()">
        <input type="button" value="Cancelar" onclick="cancelar()">
    </form>
    </div>
    <div class="vista" id="expedientePaciente">
        
        <div class="dos-columnas">
            <div class="columna">
            <label for="id">ID: </label><input type="text" id="id" name="id" class="solo-lectura"readonly ><br>
            <label for="medEspecialidad">Médico Especialista </label><input type="text" id="medEspecialidad" name="medEspecialidad" class="solo-lectura"readonly><br>
            <label for="especialidad">Especialidad: </label><input type="text" id="especialidades" name="especialidades" class="solo-lectura"readonly></select><br>
            <label for="sip">SIP: </label><input type="text" id="sip" name="sip" class="solo-lectura"readonly><br>
            <label for="nombre">Nombre: </label><input type="text" id="nombrePac" name="nombrePac" class="solo-lectura"readonly><br>
            <label for="apellidos">Apellidos: </label><input type="text" id="apellidosPac" name="apellidosPac" class="solo-lectura"readonly><br>
            <label for="fecha_nacimiento">Fecha de nacimiento </label><input type="date" id="fn" name="fn" class="solo-lectura"readonly><br>
            <label for="map">Médico de atención Primaria: </label><input type="text" id="codMAP" name="codMAP" class="solo-lectura"readonly><br>
            <label for="genero">Género: </label><input type = 'text' id="genero" name="genero" class="solo-lectura"readonly></select><br>
            <label for="patologias">Patologias: <select id="patologias" name="patologias"></select></label><br>
            <input type="button" value="guardar_patologia" onclick="guardarPatologia()">
        </div>
            <div class="columna">
            <label for="observaciones">Observaciones: </label><textarea id="observaciones" name="observaciones" class="solo-lectura"readonly></textarea><br>
            <label for="solicitud">Solicitud: </label><textarea id="solicitud" name="solicitud" class="solo-lectura"readonly></textarea><br>
            <label for="respuesta">Respuesta: </label><textarea id="respuesta" name="respuesta"></textarea><br>
            <label for="fSolicitud">F.Solicitud: </label><input type="date" id="fSolicitud" name="fSolicitud" class="solo-lectura"readonly><br>
            <label for="fAsignacion">F.Asignación: </label><input type="date" id="fAsignacion" name="fAsignacion" class="solo-lectura"readonly><br>
            <label for="fResolucion">F.Resolución: </label><input type="date" id="fResolucion" name="fResolucion" class="solo-lectura"readonly><br><br>
            <label for="mediaValoracion">Valoración media del MAP :</label><input type="text" id="valoracionMedia" name="valoracionMedia" class="solo-lectura"readonly><br>
                <div class="slid-wrapper">
                
                <label for="valoracion">Valoracion al MAP (1-10):
                <input type="text" id="etiquetaValor"  class="solo-lectura"readonly><br>
                <input type="range" id="valoracion" name="valoracion" min="1" max="10" step="1" value="5"><br><br>
                </label>
                <button type="button" onclick="guardarValoracion()">Guardar valoración</button> 
                </div>
            </div>
        </div>
        <button type="button" onclick="resolver()">Resolver</button>
            <button type="button" onclick="volverListado()">Volver al listado</button>
        <div id="fotosPaciente"></div>
        <script>
        const slider = document.getElementById("valoracion");
        const etiqueta = document.getElementById("etiquetaValor");

        function actualizarEtiqueta() {
            const valor = slider.value;
            etiqueta.value = valor;

            const porcentaje = (valor - slider.min) / (slider.max - slider.min);
            const sliderWidth = slider.offsetWidth;
            const etiquetaWidth = etiqueta.offsetWidth;

            // Calcula la posición basada en porcentaje
            let offset = porcentaje * (sliderWidth - 15);
            offset = Math.max(etiquetaWidth / 2, Math.min(offset, sliderWidth - etiquetaWidth / 2));

            etiqueta.style.left = `${offset}px`;
        }

        slider.addEventListener("input", actualizarEtiqueta);
        window.addEventListener("load", actualizarEtiqueta);
        </script>
    </div>
    <div class="vista" id="Inicio">
        <h2>Inicio</h2>
        <p id = "bienvenida"></p><!--Añadir el nombre de la persona-->
        <button type="button"  onclick="editarDatos()">Editar Datos</button>
        <button type="button" onclick='cargar_asignar_expedientes()'>Asignar Expediente</button>
        <button type="button" onclick="mostrarExpAsignados()">Mostrar expedientes asignados</button><br>
        <button type="button" onclick="salir()">Salir</button>
    </div>
    <div class="vista" id="AsignarExpediente">
        <h2>Asignar Expediente</h2>
        <p id = "bienvenida"></p><!--Añadir el nombre de la persona-->
        <div id="div_expedientes"></div>
        <button type='button' onclick="volverInicio()">Volver al inicio</button>
    </div>
    <div class="vista" id="chatMAPEsp">
        <h2 id="titulo_chat"></h2>
        <ul id="mensajes_chat"></ul>
        <input type="text" id="mensaje" placeholder="Escriba un mensaje">
        <button type="button" onclick="enviar()">Enviar mensaje</button>
        <button type="button" onclick="saludar()">Saludar</button>
        <button type="button" onclick="limpiar()">Limpiar chat</button>
        <button type="button" onclick="volverInicio()">Volver</button>
    </div>
    <div class="vista" id="ExpedientesAsignados">
        <h2>Expedientes Asignados</h2>
        <div id="div_expedientesAsignados"></div>
        <button type="button" onclick="volverInicio()">Volver al Inicio</button>
    </div>
    
    <script src="rest.js"></script>
    <script src="rpc_cliente.js"></script>
    <script src="main.js"></script>
</body>
</html>